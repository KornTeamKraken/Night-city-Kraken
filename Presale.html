<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kraken Crypto ‚Äî Presale, Staking & Game</title>
  <meta name="description" content="Presale KRAKEN token sur Solana. Achetez KRAKEN, stakez et gagnez des r√©compenses. Jeu mobile inclus." />
  <link rel="icon" href="assets/favicon.ico">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.js"></script>
  <style>
    body { font-family: 'Orbitron', sans-serif; background:#05060a; color:#e6eef8; }
    .neon { text-shadow: 0 0 10px rgba(124,58,237,.8), 0 0 30px rgba(99,102,241,.6); }
    .solana-glow { text-shadow: 0 0 10px rgba(158,113,245,.8), 0 0 30px rgba(158,113,245,.6); }
    .banner-solana { animation: glow-pulse 2s ease-in-out infinite; }
    @keyframes glow-pulse { 0%, 100% { box-shadow: 0 0 10px rgba(158,113,245,.4), inset 0 0 10px rgba(158,113,245,.2); } 50% { box-shadow: 0 0 20px rgba(158,113,245,.8), inset 0 0 15px rgba(158,113,245,.4); } }
    .card-hover { transition: all 0.3s ease; }
    .card-hover:hover { transform: translateY(-5px); box-shadow: 0 0 20px rgba(158,113,245,.6); }
    .progress-bar { background: linear-gradient(90deg, #7c3aed, #ec4899); }
  </style>
</head>
<body class="min-h-screen">

<!-- Language Selector -->
<div class="flex justify-end p-4 bg-[#05060a]">
  <select id="language-selector" class="bg-[#0a0c1a] text-white border border-purple-500/30 rounded px-3 py-1">
    <option value="fr">Fran√ßais</option>
    <option value="en">English</option>
  </select>
</div>

<!-- Bandeau Solana -->
<div class="banner-solana bg-gradient-to-r from-purple-900/40 via-purple-800/30 to-purple-900/40 border-b-2 border-purple-500 py-3 px-4">
  <div class="max-w-6xl mx-auto flex items-center justify-center gap-3 flex-wrap">
    <span class="text-lg">‚ö°</span>
    <p class="text-center solana-glow font-semibold">
      Presale KRAKEN Token | ‚ö° Native on Solana
    </p>
    <span class="text-lg">‚ö°</span>
  </div>
</div>

<!-- Header -->
<header class="flex items-center justify-between p-6 bg-[#05060a]">
  <div class="flex items-center gap-4">
    <img src="assets/logo.png" alt="Kraken logo" class="h-12 w-12">
    <h1 class="text-2xl md:text-3xl neon tracking-widest">KRAKEN</h1>
  </div>
  <nav class="hidden md:flex space-x-4">
    <a href="index.html" class="hover:underline">Accueil</a>
    <a href="index.html#lore" class="hover:underline">Lore</a>
    <a href="index.html#roadmap" class="hover:underline">Roadmap</a>
    <a href="#presale" class="hover:underline">Presale</a>
  </nav>
  <div class="md:hidden">
    <button id="menu-btn" class="text-white text-3xl focus:outline-none">‚ò∞</button>
  </div>
</header>

<!-- Hero Section -->
<section class="p-12 bg-gradient-to-b from-purple-900/20 to-[#05060a]">
  <div class="max-w-4xl mx-auto text-center">
    <h2 class="text-5xl neon mb-4">Presale KRAKEN</h2>
    <p class="text-xl text-purple-300 mb-2">Achetez KRAKEN tokens avant le lancement public</p>
    <p class="text-purple-400 solana-glow font-semibold">‚ö° Token natif Solana | Prix en USD</p>
  </div>
</section>

<!-- Main Content -->
<section id="presale" class="p-12">
  <div class="max-w-6xl mx-auto grid md:grid-cols-2 gap-8">

    <!-- Left: Presale Info -->
    <div class="space-y-6">

      <!-- Presale Progress -->
      <div class="card-hover p-6 rounded-lg bg-[#0a0c1a] border border-purple-500/30">
        <h3 class="text-2xl neon mb-4">Progression Presale</h3>
        <div class="space-y-4">
          <div>
            <div class="flex justify-between mb-2">
              <span>Tokens vendus</span>
              <span id="progress-percent" class="solana-glow">24%</span>
            </div>
            <div class="w-full bg-purple-900/30 rounded-full h-3 border border-purple-500/30">
              <div id="progress-bar" class="progress-bar h-3 rounded-full" style="width: 24%"></div>
            </div>
            <div class="flex justify-between mt-2 text-sm text-gray-400">
              <span id="sold-count">600 000</span>
              <span>/ 2 500 000 KRAKEN</span>
            </div>
          </div>
          <div class="p-4 bg-purple-500/10 rounded border border-purple-500/30">
            <p class="text-sm text-gray-300 mb-2">Prix actuel:</p>
            <p class="text-3xl neon">$0.12</p>
            <p class="text-xs text-gray-400 mt-2">Le prix augmente √† chaque phase</p>
          </div>
        </div>
      </div>

      <!-- Staking Pool -->
      <div class="card-hover p-6 rounded-lg bg-[#0a0c1a] border border-cyan-500/30">
        <h3 class="text-2xl neon mb-4">üîí Pool de Staking</h3>
        <div class="space-y-4">
          <div class="p-4 bg-cyan-500/10 rounded border border-cyan-500/30">
            <p class="text-sm text-gray-300">APY 30 jours</p>
            <p class="text-2xl text-cyan-400 font-bold">15% APY</p>
          </div>
          <div class="p-4 bg-cyan-500/10 rounded border border-cyan-500/30">
            <p class="text-sm text-gray-300">APY 90 jours</p>
            <p class="text-2xl text-cyan-400 font-bold">35% APY</p>
          </div>
          <div class="p-4 bg-cyan-500/10 rounded border border-cyan-500/30">
            <p class="text-sm text-gray-300">APY 180 jours</p>
            <p class="text-2xl text-cyan-400 font-bold">50% APY</p>
          </div>

          <!-- Barre de progression staking -->
          <div class="mt-4">
            <span class="text-sm text-gray-300">Progression staking:</span>
            <div class="w-full bg-purple-900/30 rounded-full h-3 border border-purple-500/30 mt-1">
              <div id="staking-progress-bar" class="progress-bar h-3 rounded-full" style="width:0%"></div>
            </div>
            <p class="text-sm text-gray-400 mt-1">R√©compenses estim√©es: <span id="staking-rewards">0 KRAKEN</span></p>
          </div>

          <div class="mt-4">
            <label class="block text-sm text-gray-300 mb-2">Montant √† staker</label>
            <input type="number" id="stake-amount" placeholder="1000" min="100" class="w-full px-3 py-2 bg-purple-900/30 border border-purple-500/30 rounded text-white">
          </div>
          <div class="mt-2">
            <label class="block text-sm text-gray-300 mb-2">Dur√©e</label>
            <select id="stake-duration" class="w-full px-3 py-2 bg-purple-900/30 border border-purple-500/30 rounded text-white">
              <option value="30">30 jours (15% APY)</option>
              <option value="90">90 jours (35% APY)</option>
              <option value="180">180 jours (50% APY)</option>
            </select>
          </div>
          <button onclick="updateStaking()" class="w-full mt-4 px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 rounded-lg hover:shadow-lg transition">Calculer R√©compenses</button>
        </div>
      </div>

      <!-- Referral System -->
      <div class="card-hover p-6 rounded-lg bg-[#0a0c1a] border border-green-500/30">
        <h3 class="text-2xl neon mb-4">üéÅ Programme de Parrainage</h3>
        <div class="space-y-3 text-sm text-gray-300">
          <div class="p-3 bg-green-500/10 rounded border border-green-500/30">
            <p class="text-green-300 font-semibold">Bonus de parrainage</p>
            <p>+10% sur chaque achat parrain√©</p>
          </div>
          <input type="text" id="referral-code" placeholder="Votre code de parrainage" class="w-full px-3 py-2 bg-purple-900/30 border border-purple-500/30 rounded text-sm" readonly>
          <button onclick="copyReferralCode()" class="w-full px-3 py-2 bg-green-600/50 rounded hover:bg-green-600 transition text-sm">Copier</button>
        </div>
      </div>
    </div>

    <!-- Right: Purchase Form -->
    <div class="space-y-6">
      <!-- Card Payment -->
      <div class="card-hover p-6 rounded-lg bg-[#0a0c1a] border border-pink-500/30">
        <h3 class="text-2xl neon mb-4">üí≥ Acheter avec Carte</h3>
        <form id="card-form" class="space-y-4">
          <div>
            <label class="block text-sm text-gray-300 mb-2">Montant (USD)</label>
            <input type="number" id="amount-usd" placeholder="100" min="10" max="5000" class="w-full px-3 py-2 bg-purple-900/30 border border-purple-500/30 rounded text-white" required>
            <p class="text-xs text-gray-400 mt-1" id="tokens-calc">= 0 KRAKEN</p>
          </div>
          <div>
            <label class="block text-sm text-gray-300 mb-2">Email</label>
            <input type="email" placeholder="votre@email.com" class="w-full px-3 py-2 bg-purple-900/30 border border-purple-500/30 rounded text-white" required>
          </div>
          <div class="p-3 bg-purple-500/10 rounded border border-purple-500/30">
            <div class="flex justify-between text-sm mb-2">
              <span>Sous-total</span>
              <span id="subtotal">100 USD</span>
            </div>
            <div class="flex justify-between text-sm mb-2">
              <span>Frais</span>
              <span id="fees">2.5 USD</span>
            </div>
            <div class="flex justify-between font-bold border-t border-purple-500/30 pt-2 mt-2">
              <span>Total</span>
              <span id="total">102.5 USD</span>
            </div>
          </div>
          <button type="submit" class="w-full px-4 py-3 bg-gradient-to-r from-indigo-600 to-pink-500 rounded-lg font-semibold hover:shadow-lg transition">Payer avec Carte</button>
        </form>
      </div>

      <!-- Moonpay Payment -->
      <div class="card-hover p-6 rounded-lg bg-[#0a0c1a] border border-yellow-500/30">
        <h3 class="text-2xl neon mb-4">üí∏ Acheter avec Moonpay</h3>
        <button id="moonpay-btn" class="w-full px-4 py-3 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-lg font-semibold hover:shadow-lg transition">
          Payer avec Moonpay
        </button>
      </div>

      <!-- Crypto Payment -->
      <div class="card-hover p-6 rounded-lg bg-[#0a0c1a] border border-purple-500/30">
        <h3 class="text-2xl neon mb-4">‚ö° Acheter avec Solana</h3>
        <div class="space-y-4">
          <p class="text-sm text-gray-300">Connectez votre wallet Solana</p>
          <button id="connect-wallet-btn" class="w-full px-4 py-3 bg-gradient-to-r from-purple-600 to-purple-500 rounded-lg font-semibold hover:shadow-lg transition">Connecter Wallet</button>
          <div class="p-3 bg-purple-500/10 rounded border border-purple-500/30 text-center">
            <p class="text-xs text-gray-400">Phantom ‚Ä¢ Magic Eden ‚Ä¢ Ledger</p>
            <p class="text-sm mt-1">SOL: <span id="wallet-sol">0</span> | KRAKEN: <span id="wallet-kraken">0</span></p>
          </div>
        </div>
      </div>

    </div>
  </div>
</section>

<script>
let walletPublicKey = null;
let solanaConnection = new solanaWeb3.Connection(solanaWeb3.clusterApiUrl('mainnet-beta'));

async function connectWallet() {
  if (!window.solana) { alert("Installez Phantom pour continuer"); return; }
  try {
    const resp = await window.solana.connect();
    walletPublicKey = resp.publicKey.toString();
    updateWalletBalances();
  } catch (err) { console.error(err); }
}

async function updateWalletBalances() {
  if (!walletPublicKey) return;
  const solBalance = await solanaConnection.getBalance(new solanaWeb3.PublicKey(walletPublicKey));
  const solFormatted = (solBalance / 1e9).toFixed(9);
  document.getElementById("wallet-sol").innerText = solFormatted;
  const krakenBalance = await getKrakenBalance(walletPublicKey);
  document.getElementById("wallet-kraken").innerText = krakenBalance.toFixed(9);
}

async function getKrakenBalance(pubKey) { return 1000; }

document.getElementById("connect-wallet-btn").addEventListener("click", connectWallet);

// Moonpay
const MOONPAY_API_KEY = "VOTRE_CLE_API_MOONPAY";
document.getElementById("moonpay-btn").addEventListener("click", () => {
  if (!walletPublicKey) { alert("Connectez votre wallet Phantom d'abord"); return; }
  const amountUSD = document.getElementById("amount-usd").value || 100;
  const url = `https://buy.moonpay.com?apiKey=${MOONPAY_API_KEY}&currencyCode=sol&walletAddress=${walletPublicKey}&baseCurrencyAmount=${amountUSD}`;
  window.open(url, "_blank");
});

// Staking
const stakingProgressBar = document.getElementById("staking-progress-bar");
function updateStaking() {
  const amount = parseFloat(document.getElementById("stake-amount").value) || 0;
  const duration = parseInt(document.getElementById("stake-duration").value);
  const apyMap = {30:0.15,90:0.35,180:0.5};
  const rewards = amount * apyMap[duration] * (duration/365);
  document.getElementById("staking-rewards").innerText = rewards.toFixed(9) + " KRAKEN";
  // Progression bar exemple
  const totalStaked = 50000; // Exemple
  const percent = Math.min((amount/totalStaked)*100,100);
  stakingProgressBar.style.width = percent + "%";
}

// Referral copy
function copyReferralCode() {
  const code = document.getElementById("referral-code");
  code.select();
  code.setSelectionRange(0, 99999);
  navigator.clipboard.writeText(code.value);
  alert("Code copi√© !");
}
</script>

</body>
</html>
