<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kraken Crypto ‚Äî Presale & Staking</title>
  <meta name="description" content="Presale KRAKEN token sur Solana. Achetez KRAKEN, stakez et gagnez des r√©compenses." />
  <link rel="icon" href="assets/favicon.ico">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Orbitron', sans-serif; background:#05060a; color:#e6eef8; }
    .neon { text-shadow: 0 0 10px rgba(124,58,237,.8), 0 0 30px rgba(99,102,241,.6); }
    .solana-glow { text-shadow: 0 0 10px rgba(158,113,245,.8), 0 0 30px rgba(158,113,245,.6); }
    .banner-solana { animation: glow-pulse 2s ease-in-out infinite; }
    @keyframes glow-pulse { 0%, 100% { box-shadow: 0 0 10px rgba(158,113,245,.4), inset 0 0 10px rgba(158,113,245,.2); } 50% { box-shadow: 0 0 20px rgba(158,113,245,.8), inset 0 0 15px rgba(158,113,245,.4); } }
    .card-hover { transition: all 0.3s ease; }
    .card-hover:hover { transform: translateY(-5px); box-shadow: 0 0 20px rgba(158,113,245,.6); }
    .progress-bar { background: linear-gradient(90deg, #7c3aed, #ec4899); }
  </style>
</head>
<body class="min-h-screen">

  <!-- Language Selector -->
  <div class="flex justify-end p-4 bg-[#05060a]">
    <select id="language-selector" class="bg-[#0a0c1a] text-white border border-purple-500/30 rounded px-3 py-1">
      <option value="fr">Fran√ßais</option>
      <option value="en">English</option>
    </select>
  </div>

  <!-- Bandeau Solana -->
  <div class="banner-solana bg-gradient-to-r from-purple-900/40 via-purple-800/30 to-purple-900/40 border-b-2 border-purple-500 py-3 px-4">
    <div class="max-w-6xl mx-auto flex items-center justify-center gap-3 flex-wrap">
      <span class="text-lg">‚ö°</span>
      <p class="text-center solana-glow font-semibold">
        Presale KRAKEN Token | ‚ö° Native on Solana
      </p>
      <span class="text-lg">‚ö°</span>
    </div>
  </div>

  <!-- Header -->
  <header class="flex items-center justify-between p-6 bg-[#05060a]">
    <div class="flex items-center gap-4">
      <img src="assets/logo.png" alt="Kraken logo" class="h-12 w-12">
      <h1 class="text-2xl md:text-3xl neon tracking-widest">KRAKEN</h1>
    </div>
    <nav class="hidden md:flex space-x-4">
      <a href="index.html" class="hover:underline" data-i18n="home">Accueil</a>
      <a href="index.html#lore" class="hover:underline" data-i18n="lore">Lore</a>
      <a href="index.html#roadmap" class="hover:underline" data-i18n="roadmap">Roadmap</a>
      <a href="#presale" class="hover:underline" data-i18n="crypto">Presale</a>
    </nav>
    <div class="md:hidden">
      <button id="menu-btn" class="text-white text-3xl focus:outline-none">‚ò∞</button>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="p-12 bg-gradient-to-b from-purple-900/20 to-[#05060a]">
    <div class="max-w-4xl mx-auto text-center">
      <h2 class="text-5xl neon mb-4" data-i18n="presale-title">Presale KRAKEN</h2>
      <p class="text-xl text-purple-300 mb-2" data-i18n="presale-desc">Achetez KRAKEN tokens avant le lancement public</p>
      <p class="text-purple-400 solana-glow font-semibold" data-i18n="presale-solana">‚ö° Token natif Solana | Prix en USD</p>
    </div>
  </section>

  <!-- Main Content -->
  <section id="presale" class="p-12">
    <div class="max-w-6xl mx-auto grid md:grid-cols-2 gap-8">
      
      <!-- Left: Presale Info -->
      <div class="space-y-6">
        <!-- Presale Progress -->
        <div class="card-hover p-6 rounded-lg bg-[#0a0c1a] border border-purple-500/30">
          <h3 class="text-2xl neon mb-4" data-i18n="progress-title">Progression Presale</h3>
          <div class="space-y-4">
            <div>
              <div class="flex justify-between mb-2">
                <span data-i18n="sold">Tokens vendus</span>
                <span id="progress-percent" class="solana-glow">24%</span>
              </div>
              <div class="w-full bg-purple-900/30 rounded-full h-3 border border-purple-500/30">
                <div id="progress-bar" class="progress-bar h-3 rounded-full" style="width: 24%"></div>
              </div>
              <div class="flex justify-between mt-2 text-sm text-gray-400">
                <span id="sold-count">600 000</span>
                <span>/ 2 500 000 KRAKEN</span>
              </div>
            </div>
            <div class="p-4 bg-purple-500/10 rounded border border-purple-500/30">
              <p class="text-sm text-gray-300 mb-2" data-i18n="presale-price">Prix actuel:</p>
              <p class="text-3xl neon">$0.12</p>
              <p class="text-xs text-gray-400 mt-2" data-i18n="price-increases">Le prix augmente √† chaque phase</p>
            </div>
          </div>
        </div>

        <!-- Staking Pool -->
        <div class="card-hover p-6 rounded-lg bg-[#0a0c1a] border border-cyan-500/30">
          <h3 class="text-2xl neon mb-4" data-i18n="staking-title">üîí Pool de Staking</h3>
          <div class="space-y-4">
            <div class="p-4 bg-cyan-500/10 rounded border border-cyan-500/30">
              <p class="text-sm text-gray-300" data-i18n="apy-30">APY 30 jours</p>
              <p class="text-2xl text-cyan-400 font-bold">15% APY</p>
            </div>
            <div class="p-4 bg-cyan-500/10 rounded border border-cyan-500/30">
              <p class="text-sm text-gray-300" data-i18n="apy-90">APY 90 jours</p>
              <p class="text-2xl text-cyan-400 font-bold">35% APY</p>
            </div>
            <div class="p-4 bg-cyan-500/10 rounded border border-cyan-500/30">
              <p class="text-sm text-gray-300" data-i18n="apy-180">APY 180 jours</p>
              <p class="text-2xl text-cyan-400 font-bold">50% APY</p>
            </div>
            <button onclick="toggleStakingForm()" class="w-full mt-4 px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 rounded-lg hover:shadow-lg transition" data-i18n="stake-btn">Staker</button>
          </div>
        </div>

        <!-- Referral System -->
        <div class="card-hover p-6 rounded-lg bg-[#0a0c1a] border border-green-500/30">
          <h3 class="text-2xl neon mb-4" data-i18n="referral-title">üéÅ Programme de Parrainage</h3>
          <div class="space-y-3 text-sm text-gray-300">
            <div class="p-3 bg-green-500/10 rounded border border-green-500/30">
              <p class="text-green-300 font-semibold" data-i18n="ref-bonus">Bonus de parrainage</p>
              <p>+10% sur chaque achat parrain√©</p>
            </div>
            <div class="p-3 bg-green-500/10 rounded border border-green-500/30">
              <p class="text-green-300 font-semibold" data-i18n="ref-unlimited">Illimit√©</p>
              <p>Pas de limite de parrainages</p>
            </div>
            <input type="text" id="referral-code" placeholder="Votre code de parrainage" class="w-full px-3 py-2 bg-purple-900/30 border border-purple-500/30 rounded text-sm" readonly>
            <button onclick="copyReferralCode()" class="w-full px-3 py-2 bg-green-600/50 rounded hover:bg-green-600 transition text-sm" data-i18n="copy-btn">Copier</button>
          </div>
        </div>
      </div>

      <!-- Right: Purchase Form -->
      <div class="space-y-6">
        <!-- Card Payment -->
        <div class="card-hover p-6 rounded-lg bg-[#0a0c1a] border border-pink-500/30">
          <h3 class="text-2xl neon mb-4" data-i18n="buy-card">üí≥ Acheter avec Carte</h3>
          <form id="card-form" class="space-y-4">
            <div>
              <label class="block text-sm text-gray-300 mb-2" data-i18n="amount-usd">Montant (USD)</label>
              <input type="number" id="amount-usd" placeholder="100" min="10" max="5000" class="w-full px-3 py-2 bg-purple-900/30 border border-purple-500/30 rounded text-white" required>
              <p class="text-xs text-gray-400 mt-1" id="tokens-calc">= 0 KRAKEN</p>
            </div>
            <div>
              <label class="block text-sm text-gray-300 mb-2" data-i18n="email">Email</label>
              <input type="email" placeholder="votre@email.com" class="w-full px-3 py-2 bg-purple-900/30 border border-purple-500/30 rounded text-white" required>
            </div>
            <div class="p-3 bg-purple-500/10 rounded border border-purple-500/30">
              <div class="flex justify-between text-sm mb-2">
                <span data-i18n="subtotal">Sous-total</span>
                <span id="subtotal">100 USD</span>
              </div>
              <div class="flex justify-between text-sm mb-2">
                <span data-i18n="fees">Frais</span>
                <span id="fees">2.5 USD</span>
              </div>
              <div class="flex justify-between font-bold border-t border-purple-500/30 pt-2 mt-2">
                <span data-i18n="total">Total</span>
                <span id="total">102.5 USD</span>
              </div>
            </div>
            <button type="submit" class="w-full px-4 py-3 bg-gradient-to-r from-indigo-600 to-pink-500 rounded-lg font-semibold hover:shadow-lg transition" data-i18n="pay-btn">Payer avec Carte</button>
          </form>
        </div>

        <!-- Crypto Payment -->
        <div class="card-hover p-6 rounded-lg bg-[#0a0c1a] border border-purple-500/30">
          <h3 class="text-2xl neon mb-4" data-i18n="buy-crypto">‚ö° Acheter avec Solana</h3>
          <div class="space-y-4">
            <p class="text-sm text-gray-300" data-i18n="wallet-connect">Connectez votre wallet Solana</p>
            <button id="connect-wallet-btn" class="w-full px-4 py-3 bg-gradient-to-r from-purple-600 to-purple-500 rounded-lg font-semibold hover:shadow-lg transition" data-i18n="connect-wallet">Connecter Wallet</button>
            <div class="p-3 bg-purple-500/10 rounded border border-purple-500/30">
              <p class="text-xs text-gray-400 text-center" data-i18n="wallet-support">Phantom ‚Ä¢ Magic Eden ‚Ä¢ Ledger</p>
            </div>
          </div>
        </div>

        <!-- Benefits Box -->
        <div class="card-hover p-6 rounded-lg bg-gradient-to-br from-green-900/20 to-cyan-900/20 border border-green-500/30">
          <h3 class="text-lg neon mb-3" data-i18n="benefits-title">‚ú® Avantages Presale</h3>
          <ul class="text-sm text-gray-300 space-y-2">
            <li>‚úÖ <span data-i18n="benefit-1">Prix early-bird garanti</span></li>
            <li>‚úÖ <span data-i18n="benefit-2">Allocation bonus +5%</span></li>
            <li>‚úÖ <span data-i18n="benefit-3">Acc√®s VIP √† Discord</span></li>
            <li>‚úÖ <span data-i18n="benefit-4">NFT Genesis gratuit</span></li>
            <li>‚úÖ <span data-i18n="benefit-5">Staking imm√©diat possible</span></li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Solana & SPL Token Script -->
  <script src="https://unpkg.com/@solana/web3.js@1.88.0/lib/index.iife.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@solana/spl-token@0.3.5/lib/index.iife.js"></script>
  <script>
  const connection = new solanaWeb3.Connection(solanaWeb3.clusterApiUrl('devnet'), 'confirmed');

  // Token KRAKEN SPL (devnet pour test)
  const TOKEN_MINT = new solanaWeb3.PublicKey("HePinRStcHBA9yHm8apYchaT3KJC2NbTXMdmn1ThRQoj");

  // Wallet presale (‚ö†Ô∏è Devnet pour tests)
  const PRESALE_WALLET = new solanaWeb3.PublicKey("7RqjtFPJ3z2uVA67BC6WPSU36MFjJpeMgju11Q5vzFzE");

  // Cl√© priv√©e du wallet presale ‚ö†Ô∏è Jamais exposer en prod
  let PRESALE_KEYPAIR = null; // Mettre en serveur s√©curis√© pour production

  let wallet = null;

  // Connecter Phantom
  async function connectWallet() {
    if (window.solana && window.solana.isPhantom) {
      try {
        const resp = await window.solana.connect();
        wallet = resp.publicKey;
        alert('Wallet connect√©: ' + wallet.toString());
      } catch(err) {
        alert('Erreur connexion wallet: ' + err.message);
      }
    } else {
      alert('Installez Phantom Wallet pour continuer');
    }
  }

  // Envoyer tokens KRAKEN depuis presale wallet vers utilisateur
  async function sendKrakenTokens(amount) {
    if (!wallet) return alert('Connectez votre wallet');
    if (!amount || amount <= 0) return alert('Montant invalide');
    if (!PRESALE_KEYPAIR) return alert('Cl√© priv√©e presale non configur√©e c√¥t√© client !');

    try {
      const token = new splToken.Token(connection, TOKEN_MINT, splToken.TOKEN_PROGRAM_ID, PRESALE_KEYPAIR);

      const userTokenAccount = await token.getOrCreateAssociatedAccountInfo(wallet);
      const presaleTokenAccount = await token.getOrCreateAssociatedAccountInfo(PRESALE_WALLET);

      const tx = new solanaWeb3.Transaction().add(
        splToken.Token.createTransferInstruction(
          splToken.TOKEN_PROGRAM_ID,
          presaleTokenAccount.address,
          userTokenAccount.address,
          PRESALE_KEYPAIR.publicKey,
          [],
          amount * (10 ** 9) // 9 d√©cimales KRAKEN
        )
      );

      const signature = await solanaWeb3.sendAndConfirmTransaction(connection, tx, [PRESALE_KEYPAIR]);
      alert('KRAKEN envoy√© ! TXID: ' + signature);
    } catch(err) {
      alert('Erreur: ' + err.message);
    }
  }

  document.getElementById('connect-wallet-btn').onclick = connectWallet;
  </script>
</body>
</html>

